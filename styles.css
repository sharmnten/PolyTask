:root {
    --radius: 15px;
    /* Palette (from comment) */
    --coral: #EF6F6C;   /* Coral Red */
    --dark-slate: #465775; /* Dark Slate Blue */
    --sandy: #F7B074;   /* Sandy Orange */
    --maize: #FFF07C;   /* Maize (warning) */
    --celadon: #ACDD91; /* Celadon Green (success) */
    --mint: #59C9A5;    /* Mint (accent) */
    --dark-cyan: #50908D; /* Info */
    --violet: #715D73;   /* Violet accent */
    --rose: #9B6371;     /* Rose taupe */
    --cadet: #6C7A89;    /* Muted (darkened for a11y) */

    /* Semantic variables used in the site */
    --radius-medium: 0.75rem;
    --spacing-sm: 0.5rem;
    --primary: var(--dark-slate);
    --accent: var(--coral);
    --accent-2: var(--sandy);
    --accent-3: var(--mint);
    --success: var(--celadon);
    --warning: var(--maize);
    --info: var(--dark-cyan);
    --muted: var(--cadet);
    --bg: #f7f8fb; /* slightly lighter page bg */
    --card-bg: #ffffff;
    --border-color: rgba(16,24,40,0.05);
}

/* Dark Mode Overrides */
body.dark {
    --bg: #0f172a;
    --card-bg: #1e293b;
    --primary: #a5b4fc; /* Brighter Indigo */
    --muted: #94a3b8;
    --border-color: #334155;
    color: #e2e8f0;
    
    /* Tweaked accents for dark mode contrast */
    --coral: #f87171;
    --dark-slate: #818cf8;
    --violet: #c084fc;
}

body.dark .task-item, 
body.dark .card, 
body.dark .stat-card,
body.dark .action-card,
body.dark .smart-add-box,
body.dark .nav-tab.active {
    background: var(--card-bg);
    border-color: #334155;
    color: #f1f5f9;
}
body.dark .smart-add-box input, body.dark input { color: white; }

body.dark .input-wrapper input,
body.dark .input-wrapper select {
    background: #0f172a; 
    border-color: #334155;
    color: white;
}

body {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    background-color: var(--bg);
    font-family: system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}
/* Card / centered container used by login/signup pages */
.card {
    width: 360px;
    max-width: calc(100% - 2rem);
    margin: 3.5rem auto;
    background: var(--card-bg);
    padding: 1.25rem 1.5rem;
    border-radius: var(--radius);
    box-shadow: 0 6px 20px rgba(16,24,40,0.08);
    color: #101828;
}
/* .card { font-family: ... } removed - moved to body */
.lead {
    color: var(--muted);
    margin: 0 0 1rem;
}

/* Hero section on the homepage */
.hero {
    padding: 3.5rem 1rem;
    text-align: center;
    background: transparent;
}
.hero .hero-content { max-width: 880px; margin: 0 auto; }
.hero h1 { font-size: 2.25rem; margin-bottom: 0.25rem; color: var(--violet); }
.hero .lead { font-size: 1.05rem; color: var(--muted); margin-bottom: 1.25rem; }

.cta-row { display:flex; gap:0.75rem; justify-content:center; align-items:center; margin-top:1rem; }
.btn-outline { background: transparent; color: var(--primary); border: 1px solid color-mix(in srgb, var(--primary) 12%, black 2%); font-weight:600; padding: 0.75rem 1rem; }

.features.card { margin: 1.5rem auto; padding: 1.25rem; }
.features-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:1rem; margin-top:1rem; }
.feature { padding:0.75rem; background: #fbfbfe; border-radius:0.6rem; border: 1px solid rgba(16,24,40,0.03); }
.feature h3 { margin:0 0 0.5rem; color: var(--dark-slate); }
.feature p { margin:0; color: var(--muted); font-size:0.95rem }

/* Floating label input wrapper */
.input-wrapper {
    position: relative;
    margin: 0.75rem 0 1rem;
}
.input-wrapper input,
.input-wrapper select {
    width: 100%;
    height: 48px; /* fixed height to allow consistent vertical centering */
    line-height: 48px; /* vertically center single-line text */
    padding: 0 0.9rem; /* left/right padding only; vertical centering handled by line-height */
    border: 1px solid #e6e6e6;
    border-radius: 0.6rem;
    background: var(--card-bg);
    font-size: 1rem;
    outline: none;
    transition: box-shadow .12s ease, border-color .12s ease, padding .12s ease;
    /* ensure padding doesn't cause overflow inside narrow containers (modal) */
    box-sizing: border-box;
    max-width: 100%;
}
.input-wrapper input::placeholder { color: transparent; }
.input-wrapper label {
    position: absolute;
    left: 0.95rem;
    top: 20%; /* sit slightly above center when blurred */
    transform: translateY(-50%);
    transform-origin: left center;
    color: var(--muted);
    background: transparent;
    padding: 0 0.25rem;
    pointer-events: none;
    transition: transform .16s ease, top .16s ease, color .16s ease, font-size .16s ease;
}
.input-wrapper select + label,
.input-wrapper input:focus + label,
.input-wrapper input:not(:placeholder-shown) + label {
    /* move label further up so it clears the input center — increased offset */
    top: -1.2rem;
    transform: translateY(0) scale(0.82);
    color: var(--primary);
    background: var(--card-bg);
    padding: 0 0.35rem;
    font-size: 0.82rem;
}

/* input focus visual */
.input-wrapper input:focus,
.input-wrapper select:focus {
    border-color: color-mix(in srgb, var(--info) 85%, black 5%);
    box-shadow: 0 6px 18px color-mix(in srgb, var(--primary) 6%, transparent 94%);
}

/* Center text when the field is not active, align left when editing */
.input-wrapper input:not(:focus) {
    text-align: center;
}
.input-wrapper input:focus {
    text-align: left;
}

/* Select specific overrides to prevent "messed up" layout */
.input-wrapper select {
    text-align: left; /* Always left align selects */
    padding-right: 2rem; /* Make room for arrow if present */
    cursor: pointer;
}
/* Wrapper for the floating action buttons */
#createTaskBtn-wrapper {
    position: fixed;
    right: 18px;
    bottom: 28px;
    width: 56px;
    height: 56px;
    z-index: 1000;
    /* Ensure the popup can be seen when it moves outside */
    display: flex;
    justify-content: center;
    transition: bottom 0.2s ease-out; /* animate change in position */
}

/* Adjust position when above the footer if it gets too close */
/* We can't detect scroll position with pure CSS easily for this dynamic footer. 
   Instead, we will add a generous bottom margin to the main content so the scroll ends before the button hits the footer,
   OR we can use JS to detecting overlap. 
   Given the constraint, a safer bet here is to just raise the button slightly if we want it to clear, or trust the user wants JS.
   But user asked to "make sure". Let's update the body/main bottom padding or use JS.
   
   Actually, the simplest reliable fix for "don't touch the footer" when the footer is at the bottom of the document
   is ensuring the main scrollable area has enough padding at the bottom so the content ends, 
   but the button is `position: fixed`.
   
   If the footer is also scrolling into view (not fixed footer), then the fixed button WILL overlap it if we scroll down.
   To prevent overlap, we need to check footer offset.
*/


/* The schedule/clock button sitting on top */
#createTaskBtn-popup {
    position: absolute;
    bottom: 48px; /* Start slightly tucked in */
    width: 28px; /* Half width of 56px */
    height: 28px;
    background-color: #d1d5db; /* Lighter Gray */
    color: white;
    border-radius: 14px 14px 0 0; /* Circle top */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all .35s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Smooth spring-like eased transition */
    transition-delay: 0.05s;
    opacity: 0;
    transform: translateY(10px); /* Reduced movement */
    z-index: 0;
    pointer-events: none;
}

#createTaskBtn-wrapper:hover #createTaskBtn-popup {
    opacity: 1;
    transform: translateY(0);
    bottom: 52px; /* Stay slightly tucked behind to prevent gap during overshoot */
    pointer-events: auto;
}

#createTaskBtn-popup:hover {
    background-color: #e5e7eb;
}

#createTaskBtn{
    width: 56px;
    height: 56px;
    font-size: 28px;
    font-weight: 700;
    border-radius: 6px; /* Square with rounded corners */
    box-shadow: 0 6px 18px rgba(16,24,40,0.1);
    background: none;
    background-color: var(--celadon);
    color: white;
    border: none;
    cursor: pointer;
    transition: transform .12s ease, background-color .12s ease;
    position: relative;
    z-index: 1;
    /* ensure perfect centering for the + glyph */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0;            /* remove extra internal padding that can nudge content */
    line-height: 1;        /* avoid font metrics shifting vertical centering */
    text-align: center;
}

/* make svg inside the create button a reliable size and ensure it follows the button color */
#createTaskBtn svg {
    width: 20px;
    height: 20px;
    display: block;
    pointer-events: none;
    color: white; /* fallback; uses currentColor in svg path */
}
#createTaskBtn:hover {
    transform: translateY(-1px);
    box-shadow: 0 10px 30px rgba(16,24,40,0.15);
    background-color: #7faf66; /* slightly darker celadon on hover */
}

/* Make inputs inside .card ignore the older generic input rules below */
.card input[type="text"],
.card input[type="email"],
.card input[type="password"] {
    width: 100%;
    height: 48px;
    line-height: 48px;
    padding: 0 0.9rem;
    font-size: 1rem;
    margin: 0;
    border-radius: 0.6rem;
    box-sizing: border-box;
}

/* small pill-style icon/button used for toggles (show/hide password) */
.icon-btn {
    background: rgba(16,24,40,0.03);
    border: 1px solid rgba(16,24,40,0.06);
    color: var(--muted);
    padding: 0.22rem 0.5rem;
    border-radius: 999px;
    cursor: pointer;
    font-size: 0.85rem;
    line-height: 1;
    min-width: 44px;
    text-align: center;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: background .12s ease, color .12s ease, transform .08s ease, border-color .12s ease;
}
.icon-btn:hover {
    background: rgba(16,24,40,0.06);
    color: var(--primary);
    transform: translateY(-1px);
}
.icon-btn:focus { outline: 2px solid color-mix(in srgb, var(--primary) 18%, transparent 82%); outline-offset: 2px; }
.icon-btn[aria-pressed="true"] {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

/* toggle button placed inside the input area on the right */
.input-wrapper { position: relative; }
.toggle-btn {
    position: absolute;
    right: 0.6rem;
    top: 50%;
    transform: translateY(-50%);
    z-index: 2;
    background: rgba(16,24,40,0.03);
    border: 1px solid rgba(16,24,40,0.06);
    padding: 0.18rem 0.5rem;
    color: var(--muted);
    font-size: 0.85rem;
    border-radius: 999px;
    cursor: pointer;
}
.toggle-btn:hover { background: rgba(16,24,40,0.06); color: var(--primary); transform: translateY(calc(-50% - 1px)); }
.toggle-btn[aria-pressed="true"] { background: var(--primary); color: white; border-color: var(--primary); }
.input-wrapper input { padding-right: 4rem; }
.input-wrapper input:not(:focus) { vertical-align: middle; }

/* Shared base for all button-like elements to keep a consistent rhythm */
.btn, .btn-outline, .icon-btn, .toggle-btn, .nav-day-btn, #createTaskBtn, button:not(.btn):not(.icon-btn):not(.btn-outline):not(.toggle-btn) {
    font-family: inherit;
    font-weight: 700;
    border-radius: 0.6rem;
    cursor: pointer;
    transition: transform .12s ease, box-shadow .12s ease, background-color .12s ease, color .12s ease;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    line-height: 1;
    border: none;
}

/* Primary filled button (keeps full-width behavior for form CTAs) */
.btn {
    width: 100%;
    padding: 0.75rem 1rem;
    background: var(--accent);
    color: white;
    box-shadow: 0 6px 18px rgba(16,24,40,0.06);
}
.btn:hover { transform: translateY(-1px); box-shadow: 0 10px 30px rgba(16,24,40,0.10); }

/* Day navigation buttons (Prev/Next) — give them unique colors and a compact shape */
.nav-day-btn {
    padding: 0.5rem 0.85rem;
    min-width: 88px;
    font-size: 0.95rem;
    border-radius: 0.6rem;
    color: white;
    box-shadow: 0 6px 18px rgba(16,24,40,0.06);
}
.nav-day-btn.prev { background: var(--mint); }
.nav-day-btn.next { background: var(--mint); }
.nav-day-btn:hover { transform: translateY(-1px); box-shadow: 0 10px 30px rgba(16,24,40,0.12); }
.nav-day-btn:focus { outline: 2px solid color-mix(in srgb, var(--primary) 18%, transparent 82%); outline-offset: 2px; }

/* Navigation row: make prev/date/next span the full width of the container
   Prev and Next sit at the edges, date takes remaining space and is centered. */
.nav-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 0.75rem;
    width: 100%;
}
.nav-row #currentDateDisplay {
    flex: 1 1 auto;
    text-align: center;
    font-weight: 600;
}
.nav-row .nav-day-btn {
    flex: 0 0 auto;
}

.helper { font-size: 0.85rem; color: var(--muted); margin-top: 0.25rem; }
.muted-link { color: var(--violet); text-decoration: none; font-weight:600 }
.muted-link:hover { text-decoration: underline; color: var(--dark-slate); }
.row { display:flex; justify-content:space-between; align-items:center; }
.checkbox { display:flex; align-items:center; gap:0.5rem; }
.checkbox input { /* keep native input for accessibility but visually hide it while keeping it interactive */
    position: absolute;
    left: 0;
    width: 1.1rem;
    height: 1.1rem;
    margin: 0;
    opacity: 0;
    cursor: pointer;
}
.checkbox { position: relative; display:flex; align-items:center; gap:0.5rem; }
.checkbox-custom {
    width: 1.1rem;
    height: 1.1rem;
    border-radius: 0.35rem;
    border: 1px solid #d0d5db;
    background: white;
    display: inline-grid;
    place-items: center;
    transition: background .12s ease, border-color .12s ease, transform .12s ease;
}
.checkbox input:checked + .checkbox-custom {
    background: var(--success);
    border-color: color-mix(in srgb, var(--success) 80%, black 5%);
}
.checkbox input:checked + .checkbox-custom::after {
    content: '✓';
    color: white;
    font-size: 0.85rem;
    line-height: 1;
}
.error { color: #b00020; font-size:0.95rem; margin-top:0.5rem; }
/*footer {
    background-color: #465775;
    color: azure;
    text-align: center;
    padding: 10px 0;
    position: fixed;
    left: 0;
    bottom: 0;
    width: 100%;
    border-radius: var(--radius) var(--radius) 0 0;
    z-index: 1000;
}*/
/* Use a column flex layout so the footer sits at the bottom when content is short,
    but remains in the normal flow (not fixed/sticky) so users can scroll away. */
footer {
    background: var(--primary);
    color: white;
    text-align: center;
    padding: 22px 0;
    width: 100%;
    border-radius: var(--radius) var(--radius) 0 0;
    margin-top: auto;
}
h1{
    color: var(--violet);
    text-align: center;
    margin-top: 20px;
    font-weight: 700;
}
/* Generic page buttons — avoid overriding component buttons like .btn, .icon-btn, .btn-outline */
button:not(.btn):not(.icon-btn):not(.btn-outline):not(.toggle-btn) {
    display: block;
    margin: 20px auto;
    background: var(--accent);
    color: white;
    border: none;
    padding: 10px 20px;
    cursor: pointer;
    font-size: 16px;
    border-radius: 0.6rem;
}
button:not(.btn):not(.icon-btn):not(.btn-outline):not(.toggle-btn):hover { filter: brightness(.95); transform: translateY(-1px); }
label {
    display: block;
    margin: 10px 0 5px;
    font-weight: bold;
    align-content: center;
}
/* Removed broad input styling that conflicted with .input-wrapper and .card input rules. */
section {
    max-width: 80%;
    margin: 0 auto;
    padding: 20px;
    /*background-color: white;*/
    border-radius: var(--radius);
}
.calendar-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 10px;
}

/* Larger card used by the calendar page so the calendar can fill ~80% of the viewport */
.card.calendar-large {
    width: 80vw;          /* target 80% of the viewport width */
    max-width: 1200px;    /* don't get absurdly wide on very large screens */
    margin: 2rem auto;    /* center and give vertical spacing */
    box-sizing: border-box; /* include padding in width */
}

/* Ensure calendar grid occupies full width of its container */
.card.calendar-large .calendar-grid { width: 100%; }

/* Make any .card that is rendered inside the calendar grid stretch to the full grid width
   (the renderer creates a nested .card element; default .card width is narrow, so override it here) */
.card.calendar-large .calendar-grid > .calendar-inner {
    grid-column: 1 / -1;
    width: 100%;
    margin: 0 0 1rem 0; /* keep a small vertical gap but remove horizontal centering margin */
    box-sizing: border-box;
    background: transparent; /* remove inner card background so it sits inside the outer card */
    box-shadow: none;        /* remove inner shadow */
    padding: 0;              /* outer card handles padding */
}

/* Visual helpers for the calendar-inner header and spacing */
.calendar-inner > div:first-child { margin-bottom: 8px; }

/* Day view grid: left time column + right events column */
.day-grid { display: flex; gap: 12px; align-items: flex-start; }
.day-grid .time-column { width: 72px; flex: 0 0 72px; border-right: 1px solid rgba(16,24,40,0.06); box-sizing: border-box; padding-right: 10px; }
.day-grid .time-slot { height: 48px; display:flex; align-items:center; font-size:0.875rem; color:var(--muted); padding-left:6px; }
.day-grid .events-column { 
    flex: 1 1 auto; 
    min-width: 0; 
    padding-left: 12px;
    background-image: linear-gradient(to bottom, transparent 47px, rgba(16,24,40,0.06) 47px);
    background-size: 100% 48px;
}
.day-grid .events-column .event-card { padding: 12px; margin-bottom: 8px; background: var(--card-bg); border-radius: 6px; box-sizing: border-box; width: 100%; }

/* Responsive: Stack layout for mobile */
@media (max-width: 640px) {
    /* Full screen usage on mobile */
    .card, .card.calendar-large {
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 !important;
        border-radius: 0 !important;
        min-height: 100vh;
        box-shadow: none !important;
        border: none !important;
        padding: 0.5rem;
    }
    
    /* Ensure body doesn't add scroll if card does */
    body {
        margin: 0;
        background: var(--card-bg); /* Seamless transition */
    }

    /* Navigation row: stack buttons */
    .nav-row {
        flex-direction: column;
        gap: 0.5rem;
        align-items: stretch;
    }
    
    .nav-row button, 
    .nav-row .nav-day-btn {
        width: 100%;
        margin-left: 0 !important;
        margin-right: 0 !important;
        justify-content: center;
    }

    /* Date display centered */
    #currentDateDisplay {
        text-align: center;
        margin: 0.25rem 0;
        font-weight: 600;
    }

    /* Day Grid: Keep side-by-side but compact */
    .day-grid {
        display: flex;
        flex-direction: row;
    }

    /* Compress time column */
    .day-grid .time-column {
        width: 35px; /* Narrower than desktop */
        flex: 0 0 auto;
        padding-right: 2px;
        border-right: 1px solid rgba(16,24,40,0.08);
    }
    
    .day-grid .time-slot {
        font-size: 0.7rem; /* Smaller font */
        text-align: right;
        padding-right: 2px;
    }
    
    /* Events column takes remaining width */
    .day-grid .events-column {
        padding-left: 4px; /* Less padding */
    }
    
    /* Event cards roughly same but maybe smaller text */
    .event-card {
        padding: 8px !important;
    }
    .event-card .title {
        font-size: 0.85rem;
    }
    .event-card .time {
        font-size: 0.75rem;
    }
    
    /* Hide some details on very small screens if needed, 
       or just let them wrap */
    
    /* Modal adjustments */
    #taskModal .card {
        width: 90% !important;
        max-width: 360px;
    }
}

  /* --- Loading Spinner --- */
  .btn-loading {
      position: relative;
      color: transparent !important;
      pointer-events: none;
  }
  .btn-loading:after {
      content: "";
      position: absolute;
      top: 50%; left: 50%;
      width: 16px; height: 16px;
      margin: -8px 0 0 -8px;
      border: 2px solid rgba(255,255,255,0.5);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 0.8s infinite linear;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  /* --- Empty State Hint --- */
  .events-column.has-hint::after {
      content: "Double-click anywhere to add a task";
      position: absolute;
      top: 40%;
      left: 0;
      right: 0;
      text-align: center;
      color: var(--cadet);
      opacity: 0.2;
      font-size: 1.5rem;
      font-weight: 700;
      pointer-events: none;
      transform: rotate(-5deg);
  }
.day-grid .events-column .empty { opacity: .6; padding: 8px 0; }
/* --- Toast Notifications --- */
#toast-container {
    position: fixed;
    bottom: 20px;
    left: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    z-index: 10000;
}
.toast {
    background: white;
    color: #333;
    padding: 12px 16px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    display: flex;
    align-items: center;
    gap: 8px;
    min-width: 250px;
    max-width: 350px;
    animation: slideIn 0.3s ease-out forwards;
    border-left: 4px solid var(--primary);
    font-size: 0.9rem;
}
.toast.success { border-left-color: var(--celadon); }
.toast.error { border-left-color: var(--coral); }
.toast.info { border-left-color: var(--dark-cyan); }
.toast.fade-out { animation: fadeOut 0.3s ease-in forwards; }

@keyframes slideIn {
    from { transform: translateX(-100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
@keyframes fadeOut {
    to { opacity: 0; transform: translateY(10px); }
}

.event-card.dropping {
    animation: fadeInDrop 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
}

@keyframes fadeInDrop {
    from { opacity: 0; transform: scale(0.96) translateY(-4px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
}
.current-time-line {
    position: absolute;
    left: 0;
    right: 0;
    height: 2px;
    background: var(--coral);
    z-index: 5;
    pointer-events: none;
}
.current-time-line::before {
    content: "";
    position: absolute;
    left: -6px;
    top: -4px;
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: var(--coral);
}

/* --- Drag and Resize --- */
.event-card {
    /* cursor: grab; already pointer */
    transition: box-shadow 0.2s, transform 0.1s;
    user-select: none;
    z-index: 10;
}
.event-card:active {
    cursor: grabbing;
    z-index: 20;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2) !important;
}
.event-card.dragging {
    opacity: 0;
    box-shadow: none !important;
    pointer-events: none;
}
.event-card:hover {
    box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    transform: translateY(-2px);
    z-index: 15; /* ensure it pops over others slightly */
}
.resize-handle {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 14px;
    cursor: ns-resize;
    display: flex;
    justify-content: center;
    align-items: center;
    background: transparent;
}
.resize-handle::after {
    content: "";
    width: 4px;
    height: 4px;
    background: rgba(255,255,255,0.5);
    border-radius: 50%;
    box-shadow: 8px 0 0 rgba(255,255,255,0.5), -8px 0 0 rgba(255,255,255,0.5);
    transition: all 0.2s ease;
}
.resize-handle:hover::after {
    background: rgba(255,255,255,0.9);
    box-shadow: 8px 0 0 rgba(255,255,255,0.9), -8px 0 0 rgba(255,255,255,0.9);
}

/* --- Accessibility & Focus --- */
button:focus-visible, .btn:focus-visible, .icon-btn:focus-visible, input:focus-visible, textarea:focus-visible, select:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}

/* --- Conflict Visuals --- */
.event-card.conflict {
    border: 2px solid var(--coral) !important;
}
.event-card.conflict::before {
    content: "!";
    position: absolute;
    top: -6px; right: -6px;
    width: 18px; height: 18px;
    background: var(--coral);
    color: white;
    border-radius: 50%;
    font-size: 11px;
    font-weight: bold;
    display: flex; align-items: center; justify-content: center;
    z-index: 10;
    box-shadow: 0 1px 2px rgba(0,0,0,0.2);
}


/* --- Inline Styles Migrated --- */
.schedule-modal { width: 720px; max-width: calc(100% - 2rem); }
.edit-event-modal { position: fixed; inset: 0; display: flex; align-items: center; justify-content: center; background: rgba(0,0,0,0.35); z-index: 110; }
.edit-event-card { width: 750px; max-width: calc(100% - 2rem); }
.schedule-actions-wrapper { position: sticky; bottom: 0; display: flex; align-items: center; justify-content: space-between; margin-top: 12px; gap: 8px; }

/* Confetti */
.confetti { position: fixed; width: 8px; height: 8px; z-index: 9999; pointer-events: none; opacity: 0.8; }
@keyframes fall { to { transform: translateY(100vh) rotate(720deg); opacity: 0; } }

/* Keyboard Keys */
kbd { background: #eee; border-radius: 3px; border: 1px solid #b4b4b4; box-shadow: 0 1px 1px rgba(0,0,0,.2); color: #333; display: inline-block; font-size: .85em; font-weight: 700; line-height: 1; padding: 2px 4px; white-space: nowrap; }
body.dark kbd { background: #333; border-color: #555; color: #eee; }